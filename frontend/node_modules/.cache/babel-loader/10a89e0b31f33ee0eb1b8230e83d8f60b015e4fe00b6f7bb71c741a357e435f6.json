{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\roger\\\\WebstormProjects\\\\SymbAIosisFinalTwo\\\\frontend\\\\src\\\\components\\\\NodalGraph.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo, useCallback } from \"react\";\nimport ReactFlow, { Background, Controls, MiniMap, useNodesState, useEdgesState, MarkerType } from \"reactflow\";\nimport \"reactflow/dist/style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NodalGraph = ({\n  companies,\n  currentUserEmail\n}) => {\n  _s();\n  // Generate nodes and edges from companies\n  const {\n    initialNodes,\n    initialEdges\n  } = useMemo(() => {\n    const nodes = companies.map((company, idx) => {\n      // Make sure produces is an array\n      const produces = Array.isArray(company.produces) ? company.produces : [];\n      return {\n        id: company.email,\n        data: {\n          label: company.name,\n          company\n        },\n        position: {\n          x: 200 + idx * 150,\n          y: 200 + idx % 2 * 150\n        },\n        style: {\n          border: \"2px solid\",\n          borderColor: company.email === currentUserEmail ? \"red\" : \"#777\",\n          borderRadius: \"50%\",\n          padding: 10,\n          width: 100,\n          textAlign: \"center\",\n          background: \"#fff\"\n        }\n      };\n    });\n\n    // Generate edges based on produces/needs\n    const edges = [];\n    companies.forEach(a => {\n      const aProduces = Array.isArray(a.produces) ? a.produces : [];\n      companies.forEach(b => {\n        const bNeeds = Array.isArray(b.needs) ? b.needs : [];\n        if (a.email !== b.email && aProduces.some(p => bNeeds.includes(p))) {\n          edges.push({\n            id: `${a.email}-${b.email}`,\n            source: a.email,\n            target: b.email,\n            type: \"smoothstep\",\n            markerEnd: {\n              type: MarkerType.Arrow\n            }\n          });\n        }\n      });\n    });\n    return {\n      initialNodes: nodes,\n      initialEdges: edges\n    };\n  }, [companies, currentUserEmail]);\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const onNodeClick = useCallback((event, node) => {\n    setSelectedNode(node);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"600px\",\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(ReactFlow, {\n      nodes: nodes,\n      edges: edges,\n      onNodesChange: onNodesChange,\n      onEdgesChange: onEdgesChange,\n      onNodeClick: onNodeClick,\n      fitView: true,\n      children: [/*#__PURE__*/_jsxDEV(Background, {\n        variant: \"dots\",\n        gap: 12,\n        size: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MiniMap, {\n        nodeStrokeColor: n => n.id === currentUserEmail ? \"red\" : \"#777\",\n        nodeColor: n => n.id === currentUserEmail ? \"#f00\" : \"#fff\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), selectedNode && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        left: selectedNode.position.x + 120,\n        top: selectedNode.position.y,\n        padding: 10,\n        border: \"1px solid #333\",\n        borderRadius: 5,\n        background: \"#fff\",\n        zIndex: 100\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: selectedNode.data.company.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Email: \", selectedNode.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Produces:\", \" \", Array.isArray(selectedNode.data.company.produces) ? selectedNode.data.company.produces.join(\", \") : \"N/A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Needs:\", \" \", Array.isArray(selectedNode.data.company.needs) ? selectedNode.data.company.needs.join(\", \") : \"N/A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n_s(NodalGraph, \"tCa/70EuUKQ8yYx8vDPXOFfX0j8=\", false, function () {\n  return [useNodesState, useEdgesState];\n});\n_c = NodalGraph;\nexport default NodalGraph;\nvar _c;\n$RefreshReg$(_c, \"NodalGraph\");","map":{"version":3,"names":["React","useState","useMemo","useCallback","ReactFlow","Background","Controls","MiniMap","useNodesState","useEdgesState","MarkerType","jsxDEV","_jsxDEV","NodalGraph","companies","currentUserEmail","_s","initialNodes","initialEdges","nodes","map","company","idx","produces","Array","isArray","id","email","data","label","name","position","x","y","style","border","borderColor","borderRadius","padding","width","textAlign","background","edges","forEach","a","aProduces","b","bNeeds","needs","some","p","includes","push","source","target","type","markerEnd","Arrow","setNodes","onNodesChange","setEdges","onEdgesChange","selectedNode","setSelectedNode","onNodeClick","event","node","height","children","fitView","variant","gap","size","fileName","_jsxFileName","lineNumber","columnNumber","nodeStrokeColor","n","nodeColor","left","top","zIndex","join","_c","$RefreshReg$"],"sources":["C:/Users/roger/WebstormProjects/SymbAIosisFinalTwo/frontend/src/components/NodalGraph.jsx"],"sourcesContent":["import React, { useState, useMemo, useCallback } from \"react\";\r\nimport ReactFlow, {\r\n    Background,\r\n    Controls,\r\n    MiniMap,\r\n    useNodesState,\r\n    useEdgesState,\r\n    MarkerType,\r\n} from \"reactflow\";\r\nimport \"reactflow/dist/style.css\";\r\n\r\nconst NodalGraph = ({ companies, currentUserEmail }) => {\r\n    // Generate nodes and edges from companies\r\n    const { initialNodes, initialEdges } = useMemo(() => {\r\n        const nodes = companies.map((company, idx) => {\r\n            // Make sure produces is an array\r\n            const produces = Array.isArray(company.produces)\r\n                ? company.produces\r\n                : [];\r\n\r\n            return {\r\n                id: company.email,\r\n                data: { label: company.name, company },\r\n                position: { x: 200 + idx * 150, y: 200 + (idx % 2) * 150 },\r\n                style: {\r\n                    border: \"2px solid\",\r\n                    borderColor:\r\n                        company.email === currentUserEmail ? \"red\" : \"#777\",\r\n                    borderRadius: \"50%\",\r\n                    padding: 10,\r\n                    width: 100,\r\n                    textAlign: \"center\",\r\n                    background: \"#fff\",\r\n                },\r\n            };\r\n        });\r\n\r\n        // Generate edges based on produces/needs\r\n        const edges = [];\r\n        companies.forEach((a) => {\r\n            const aProduces = Array.isArray(a.produces) ? a.produces : [];\r\n            companies.forEach((b) => {\r\n                const bNeeds = Array.isArray(b.needs) ? b.needs : [];\r\n                if (a.email !== b.email && aProduces.some((p) => bNeeds.includes(p))) {\r\n                    edges.push({\r\n                        id: `${a.email}-${b.email}`,\r\n                        source: a.email,\r\n                        target: b.email,\r\n                        type: \"smoothstep\",\r\n                        markerEnd: { type: MarkerType.Arrow },\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        return { initialNodes: nodes, initialEdges: edges };\r\n    }, [companies, currentUserEmail]);\r\n\r\n    const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\r\n    const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\r\n    const [selectedNode, setSelectedNode] = useState(null);\r\n\r\n    const onNodeClick = useCallback((event, node) => {\r\n        setSelectedNode(node);\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ height: \"600px\", width: \"100%\" }}>\r\n            <ReactFlow\r\n                nodes={nodes}\r\n                edges={edges}\r\n                onNodesChange={onNodesChange}\r\n                onEdgesChange={onEdgesChange}\r\n                onNodeClick={onNodeClick}\r\n                fitView\r\n            >\r\n                <Background variant=\"dots\" gap={12} size={1} />\r\n                <Controls />\r\n                <MiniMap\r\n                    nodeStrokeColor={(n) =>\r\n                        n.id === currentUserEmail ? \"red\" : \"#777\"\r\n                    }\r\n                    nodeColor={(n) =>\r\n                        n.id === currentUserEmail ? \"#f00\" : \"#fff\"\r\n                    }\r\n                />\r\n            </ReactFlow>\r\n\r\n            {selectedNode && (\r\n                <div\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        left: selectedNode.position.x + 120,\r\n                        top: selectedNode.position.y,\r\n                        padding: 10,\r\n                        border: \"1px solid #333\",\r\n                        borderRadius: 5,\r\n                        background: \"#fff\",\r\n                        zIndex: 100,\r\n                    }}\r\n                >\r\n                    <strong>{selectedNode.data.company.name}</strong>\r\n                    <div>Email: {selectedNode.id}</div>\r\n                    <div>\r\n                        Produces:{\" \"}\r\n                        {(Array.isArray(selectedNode.data.company.produces)\r\n                            ? selectedNode.data.company.produces.join(\", \")\r\n                            : \"N/A\")}\r\n                    </div>\r\n                    <div>\r\n                        Needs:{\" \"}\r\n                        {(Array.isArray(selectedNode.data.company.needs)\r\n                            ? selectedNode.data.company.needs.join(\", \")\r\n                            : \"N/A\")}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NodalGraph;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}